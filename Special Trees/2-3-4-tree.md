## 📘 عنوان مبحث: درخت‌ 4-3-2 (4-3-2 tree)


### 1️⃣ درسنامه

درخت 4-3-2 یکی از انواع درخت‌های جست و جوی متوازن(BST) است. این درخت همیشه متوازن می‌ماند و عملیات جست‌وجو، درج و حذف را در زمان (log n)O انجام می‌دهد.


**ویژگی‌های اصلی:**

 - داخل هر گره از این درخت‌ها از یک تا سه کلید وجود دارد و کلید های داخل هر گره به صورت صعودی قرار می‌گیرند.
 
 -  همه‌ی زیر درخت‌ها خاصیت BST دارند. یعنی اینکه سمت چپ هر کلید از آن کوچکتر و سمت راست هر کلید از آن بزرگتر است. 
 
 - گرهی که K تا کلید دارد، یا برگ است و زیردرختی ندارد، یا هم دقیقا K+1 تا زیردرخت دارد.
 
 - تمام برگ‌ها در یک سطح قرار دارند. (درخت کاملا متوازن است.)
 

**انواع گره‌ها:**

- گره 2تایی --> 1 کلید، 2 فرزند

- گره 3تایی --> 2 کلید، 3 فرزند

- گره 4تایی --> 3 کلید، 4 فرزند



### 2️⃣ مثال

فرض کنید می‌خواهیم مقادیر زیر را از چپ به راست در یک درخت 4-3-2 درج کنیم.
53, 27, 75, 25, 70, 41, 38, 16, 59, 36, 73, 65

راه حل: 
1. با سه کلید اول یه گره میسازیم. 
   27 53 75 
   
2. حال در این قسمت دیگر جایی برای اضافه کردن کلید چهارم (عدد 25) وجود ندارد. پس Split می‌کنیم. به این معنا که کلید وسط بالا رفته و ریشه می‌شود، و کلید‌های راست و چپ هم زیردرخت‌های راست و چپ می‌شوند. 
           53
          /   \
        27      75

3. حال 25 را اضافه می‌کنیم.
                      53
                     /   \ 
                 25 27      75

به همین ترتیب اعداد بعدی نیز اضافه می‌شوند.
4.
                              53
                            /    \
                       25 27      70 75

5.
                             53
                           /    \
                    25 27 41      70 75

6. در این مرحله نیز برای افزودن 38 باید Split انجام دهیم. به این صورت که:
                           27 53
                   /         |         \
                  25       38 41      70 75

 7. 
                                        27 53
                              /           |           \
                          16 25        36 38 41    59 70 75
 
8.

                                         27 53 70
                            /             /       \         \
                         16 25        36 38 41     59      73 75
 
9. برای بهینه کردن روش درج، بهتر است هنگام حرکت از بالا به پایین در مسیر حرکتمان اگر گرهی پر بود آن را Split کنیم. به این روش عملیات Top_Down گویند.
10.
                                               53
                                             /     \ 
                                           27      70
                       /                 /                 \            \
                   16 25             36 38 41           59 60 65       73 75

11.
                                                    53
                                      /                             \ 
                                 27 38                                70
                        /             |        \                /              \
                     16 25            36      41 46         59 60 65           73 75 
   
12.
                                                     53
                                   /                                   \ 
                               27 38                                 60 70
                     /             |         \                /       |       \
                 16 25             36        41 46         55 59      65       73 75 



### 3️⃣ نکات تکمیلی و سوالات مفهومی

**نکات تکمیلی:**

- درخت 4-3-2 همیشه متوازن است. ولی الزاما کامل نیست.

- عملیات Split نقش کلیدی در حفظ تعادل دارد.

- افزایش ارتفاع کمتر اتفاق می‌افتد. زمانی که ریشه Split شود این اتفاق می‌افتد و در بقیه موارد ساختار داخلی تغییر کرده و ارتفاع ثابت می‌ماند.

- این درخت بر خلاف BST که دودویی است، چند راهه (Multiway Search Tree) می‌باشد و هر گره چند مسیر برای انتخاب دارد.

**سوالات مفهومی:**

1. اگر در درج Top-Down عملیات Split انجام نشود، چه مشکلی پیش می‌آید؟
ممکن است در انتها مجبور به Split چندگانه از پایین به بالا شویم که باعث پیاده‌سازی پیچیده‌تر می‌شود و کنترل تعادل سخت‌تر خواهد شد.

2. چرا همه برگ‌ها هم‌سطح‌اند؟
به این دلیل درج فقط در برگ‌ها انجام می‌شود. عملیات Split به‌صورت کنترل‌شده ارتفاع را زیاد می‌کند و هیچ مسیری زودتر یا دیرتر تمام نمی‌شود.
 این مهم‌ترین دلیل متوازن بودن درخت است.
 
 3. چه زمانی استفاده از درخت 4-3-2 توصیه می‌شود؟
- زمانی که تعادل درخت خیلی مهم است.
- عملیات جستجو، درج و حذف زیاد انجام می‌شود.
- می‌خواهیم ارتفاع درخت کم باشد.

- به طور کلی استفاده از درخت 2-3-4 زمانی توصیه می‌شود که به یک ساختار جستجوی متوازن با تضمین زمان لگاریتمی برای عملیات درج، حذف و جستجو نیاز داشته باشیم. این درخت بیشتر در تحلیل نظری، آموزش ساختارهای داده و به‌عنوان پایه‌ای برای درخت‌های چندراهه مانند B-Tree کاربرد دارد.
 
4. چه زمانی استفاده از 2-3-4 توصیه نمی‌شود؟
 وقتی پیاده‌سازی ساده می‌خواهیم. پیاده‌سازی 2-3-4 پیچیده است و معمولاً Red-Black Tree یا AVL انتخاب می‌شود.
 

### 










